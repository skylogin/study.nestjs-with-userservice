# nest.js with User Service

- nest g co Users (컨트롤러 생성)
- nest g s Users (서비스 생성)
- nest g mo Users (모듈 생성)

- docker run --name mysql-local -p 3306:3306/tcp -e MYSQL_ROOT_PASSWORD=test -d mysql:8
  - allowPublicKeyRetrieval : TURE
  - New Database (test / utf8mb4 / utf8mb4_unicode_ci)

### 요청/응답 생명주기

- 전체순서: 요청 -> 미들웨어 -> 가드 -> 인터셉터 -> 파이프 -> 비지니스로직(컨트롤러/서비스) -> 인터셉터 -> 예외필터 -> 응답
- 전체순서 세부: 요청 -> 미들웨어(전역) -> 미들웨어(모듈) -> 가드(전역) -> 가드(컨트롤러)-> 가드(라우터) -> 인터셉터(전역) -> 인터셉터(컨트롤러) -> 인터넷터(라우터) -> 파이프(전역) -> 파이프(컨트롤러) -> 파이프(라우터) -> 비지니스로직(컨트롤러/서비스) -> 인터셉터(라우터) -> 인터셉터(컨트롤러) -> 인터셉터(전역) -> 예외필터(라우터) -> 예외필터(컨트롤러) -> 예외필터(전역) -> 응답

- 미들웨어

  - 전역 -> 루트모듈 -> import 순서대로 모듈

- 가드

  - 전역 -> 컨트롤러 정의 순

- 인터셉터

  - 요청: 전역 -> 컨트롤러 -> 라우터
  - 응답: 라우터 -> 컨트롤러 -> 전역

- 파이프

  - 파이프는 순서대로, 파이프에 적용하는 파라미터는 역순으로

- 예외필터
  - 라우터 -> 컨트롤러 -> 전역
